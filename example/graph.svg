<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="670px" preserveAspectRatio="none" style="width:1229px;height:670px;" version="1.1" viewBox="0 0 1229 670" width="1229px" zoomAndPan="magnify"><defs><filter height="300%" id="f15mu8sfdgq0nm" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="655.1797" style="stroke: #A80036; stroke-width: 1.0;" width="391.5" x="4" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="135.75" y="16.0669">ConsentManager</text><rect fill="#FFFFFF" filter="url(#f15mu8sfdgq0nm)" height="405.8594" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="62.5" y="132.7266"/><rect fill="#FFFFFF" filter="url(#f15mu8sfdgq0nm)" height="341.5938" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="302.5" y="196.9922"/><rect fill="#FFFFFF" filter="url(#f15mu8sfdgq0nm)" height="221.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="769" y="288.3906"/><rect fill="#FFFFFF" filter="url(#f15mu8sfdgq0nm)" height="191.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1026" y="317.5234"/><rect fill="#FFFFFF" filter="url(#f15mu8sfdgq0nm)" height="85.3984" style="stroke: #000000; stroke-width: 2.0;" width="183" x="953" y="395.9219"/><rect fill="#FFFFFF" height="35.1328" style="stroke: none; stroke-width: 1.0;" width="183" x="953" y="446.1875"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="67" x2="67" y1="122.7266" y2="556.5859"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="307.5" x2="307.5" y1="122.7266" y2="556.5859"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="511.5" x2="511.5" y1="122.7266" y2="556.5859"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="773.5" x2="773.5" y1="122.7266" y2="556.5859"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1030.5" x2="1030.5" y1="122.7266" y2="556.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="23" y="103.1279">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="8" y="119.4248">Generic Service</text><ellipse cx="67.5" cy="33.1328" fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M67.5,41.1328 L67.5,68.1328 M54.5,49.1328 L80.5,49.1328 M67.5,68.1328 L54.5,83.1328 M67.5,68.1328 L80.5,83.1328 " fill="none" filter="url(#f15mu8sfdgq0nm)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="23" y="568.5811">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="8" y="584.8779">Generic Service</text><ellipse cx="67.5" cy="598.1797" fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M67.5,606.1797 L67.5,633.1797 M54.5,614.1797 L80.5,614.1797 M67.5,633.1797 L54.5,648.1797 M67.5,633.1797 L80.5,648.1797 " fill="none" filter="url(#f15mu8sfdgq0nm)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="164" x="223.5" y="71.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="264" y="91.1279">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="150" x="230.5" y="107.4248">Interaction Collector</text><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="164" x="223.5" y="555.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="264" y="575.5811">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="150" x="230.5" y="591.8779">Interaction Collector</text><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="213" x="405.5" y="67.1328"/><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="213" x="401.5" y="71.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="466.5" y="91.1279">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="199" x="408.5" y="107.4248">InteractionCollectorStream</text><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="213" x="405.5" y="555.5859"/><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="213" x="401.5" y="559.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="466.5" y="579.5811">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="199" x="408.5" y="595.8779">InteractionCollectorStream</text><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="723.5" y="71.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="730.5" y="91.1279">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="24" x="760" y="107.4248">PID</text><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="723.5" y="555.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="730.5" y="575.5811">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="24" x="760" y="591.8779">PID</text><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="959.5" y="71.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="987.5" y="91.1279">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="966.5" y="107.4248">PersonAggregate</text><rect fill="#FEFECE" filter="url(#f15mu8sfdgq0nm)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="959.5" y="555.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="987.5" y="575.5811">«Consents»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="966.5" y="591.8779">PersonAggregate</text><rect fill="#FFFFFF" filter="url(#f15mu8sfdgq0nm)" height="405.8594" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="62.5" y="132.7266"/><rect fill="#FFFFFF" filter="url(#f15mu8sfdgq0nm)" height="341.5938" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="302.5" y="196.9922"/><rect fill="#FFFFFF" filter="url(#f15mu8sfdgq0nm)" height="221.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="769" y="288.3906"/><rect fill="#FFFFFF" filter="url(#f15mu8sfdgq0nm)" height="191.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1026" y="317.5234"/><rect fill="#EEEEEE" filter="url(#f15mu8sfdgq0nm)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1214" x="3" y="153.293"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1217" y1="153.293" y2="153.293"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1217" y1="156.293" y2="156.293"/><rect fill="#EEEEEE" filter="url(#f15mu8sfdgq0nm)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="249" x="485.5" y="142.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="230" x="491.5" y="158.7935">Identify person on interaction</text><polygon fill="#A80036" points="290.5,192.9922,300.5,196.9922,290.5,200.9922,294.5,196.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="72.5" x2="296.5" y1="196.9922" y2="196.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="79.5" y="191.9263">PostInteraction(InteractionEvent)</text><polygon fill="#FBFB77" filter="url(#f15mu8sfdgq0nm)" points="138,209.9922,476,209.9922,486,220.9922,476,232.9922,138,232.9922,128,220.9922,138,209.9922" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="334" x="140" y="226.0591">do: create an interaction event based on interaction</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="510" x2="500" y1="259.2578" y2="255.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="510" x2="500" y1="259.2578" y2="263.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="312.5" x2="511" y1="259.2578" y2="259.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="319.5" y="254.1919">InteractionEvent</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="767" x2="757" y1="288.3906" y2="284.3906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="767" x2="757" y1="288.3906" y2="292.3906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="512" x2="768" y1="288.3906" y2="288.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="519" y="283.3247">OnInteractionEvent(InteractionEvent)</text><polygon fill="#A80036" points="1014,313.5234,1024,317.5234,1014,321.5234,1018,317.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="779" x2="1020" y1="317.5234" y2="317.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="786" y="312.4575">IdentifyPerson(IdentityMatchingSet)</text><polygon fill="#FBFB77" filter="url(#f15mu8sfdgq0nm)" points="859,330.5234,1202,330.5234,1212,356.5234,1202,383.5234,859,383.5234,849,356.5234,859,330.5234" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="861" y="346.5903">do:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="877" y="361.7231">normalize contact</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="323" x="877" y="376.856">identify a person based on the normalized contact</text><path d="M953,395.9219 L1019,395.9219 L1019,402.9219 L1009,412.9219 L953,412.9219 L953,395.9219 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="85.3984" style="stroke: #000000; stroke-width: 2.0;" width="183" x="953" y="395.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="968" y="408.9888">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="1034" y="408.1323">[PersonFound]</text><polygon fill="#FBFB77" filter="url(#f15mu8sfdgq0nm)" points="973,418.0547,1089,418.0547,1099,429.0547,1089,441.0547,973,441.0547,963,429.0547,973,418.0547" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="975" y="434.1216">do: return Person</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="953" x2="1136" y1="447.1875" y2="447.1875"/><polygon fill="#FBFB77" filter="url(#f15mu8sfdgq0nm)" points="979,453.1875,1082,453.1875,1092,464.1875,1082,476.1875,979,476.1875,969,464.1875,979,453.1875" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="981" y="469.2544">do: return Error</text><polygon fill="#A80036" points="785,505.4531,775,509.4531,785,513.4531,781,509.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="779" x2="1030" y1="509.4531" y2="509.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="791" y="504.3872">Person</text><polygon fill="#A80036" points="78.5,534.5859,68.5,538.5859,78.5,542.5859,74.5,538.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="72.5" x2="306.5" y1="538.5859" y2="538.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="84.5" y="533.52">InteractionResult</text><!--MD5=[0272644c0dfc355b58b00b0b65749919]
@startuml


== Identify person on interaction ==

box "ConsentManager"
    actor "Generic Service" as GenericService <<Consents>>
    participant "Interaction Collector" as InteractionCollector <<Consents>>
end box
collections "InteractionCollectorStream" as InteractionCollectorStream <<Consents>>
participant "PID" as PersonIdentificationEngine <<Consents>>
participant "PersonAggregate" as PersonAggregate <<Consents>>

activate GenericService
GenericService -> InteractionCollector ++: PostInteraction(InteractionEvent)
    hnote over InteractionCollector
    do: create an interaction event based on interaction
    end hnote
    InteractionCollector ->> InteractionCollectorStream: InteractionEvent
    InteractionCollectorStream ->> PersonIdentificationEngine: OnInteractionEvent(InteractionEvent)
        activate PersonIdentificationEngine
        PersonIdentificationEngine -> PersonAggregate ++: IdentifyPerson(IdentityMatchingSet)
            hnote over PersonAggregate
            do:
                normalize contact
                identify a person based on the normalized contact
            end hnote
            alt PersonFound
                hnote over PersonAggregate
                do: return Person
                end hnote
            else
                hnote over PersonAggregate
                do: return Error
                end hnote
            end
        PersonAggregate - -> PersonIdentificationEngine - -: Person
        deactivate PersonIdentificationEngine
InteractionCollector - -> GenericService - -: InteractionResult

deactivate GenericService
@enduml

PlantUML version 1.2020.17(Sat Sep 19 12:30:11 UTC 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>